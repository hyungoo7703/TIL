# 서브쿼리 vs 조인
서브쿼리와 조인은 여러 테이블의 데이터를 결합하기 위해 사용되지만, 각각의 특징과 사용 사례가 다르다.

## 주요 차이점

| **항목** | **서브쿼리** | **조인** |
| :-- | :-- | :-- |
| **정의** | 하나의 SQL 쿼리 안에 포함된 또 다른 쿼리 (중첩 쿼리) | 두 개 이상의 테이블을 관련 컬럼을 기준으로 결합하는 SQL 연산 |
| **사용 사례** | 특정 조건에 따라 데이터를 필터링하거나 복잡한 계산이 필요한 경우 | 여러 테이블에서 데이터를 결합하여 단일 결과 집합을 생성할 때 |
| **성능** | 일반적으로 조인보다 느림 (특히 대규모 데이터셋 처리 시) | 서브쿼리보다 빠르고고 데이터베이스가 최적화된 방식으로 처리 가능 |
| **가독성** | 간단한 작업에서는 읽기 쉽지만, 복잡한 서브쿼리는 이해하기 어려울 수 있음 | 테이블 간 관계를 명확히 표현하므로 가독성이 좋음 |
| **종류** | 단일 행, 다중 행, 다중 열, 상관 서브쿼리 등 | INNER JOIN, LEFT JOIN, RIGHT JOIN, FULL OUTER JOIN, CROSS JOIN 등 |
| **제약 사항** | 중첩된 쿼리가 많아지면 성능 저하 및 코드 복잡도 증가 | 잘못된 조인 조건은 성능 저하 및 부정확한 결과를 초래할 수 있음 |

## 사용 예시
1. 서브쿼리 사용 예시 <br>
**[상황]** 평균 급여보다 높은 직원 조회 <br>
(내부 쿼리가 평균 급여를 계산하고, 외부 쿼리가 이를 기준으로 데이터를 필터링)
```sql
SELECT employee_name, salary
FROM employees
WHERE salary > (
    SELECT AVG(salary)
    FROM employees
);
```

2. 조인 사용 예시 <br>
**[상황]** 직원 정보와 부서명을 결합하여 조회 <br>
(INNER JOIN을 사용하여 직원 테이블과 부서 테이블을 결합)
```sql
SELECT e.employee_name, e.salary, d.department_name
FROM employees e
INNER JOIN departments d
ON e.department_id = d.department_id;
```

## 장·단점

### 서브쿼리
+ **장점**
    + 논리를 단계적으로 나눌 수 있어 특정 조건 필터링에 유용
    + SELECT, WHERE, HAVING 등 다양한 절에서 활용 가능
+ **단점**
    + 중첩 구조로 인해 복잡성이 증가할 수 있음
    + 대규모 데이터셋 처리 시 성능 저하

### 조인
+ **장점**
    + 데이터베이스가 최적화된 방식으로 실행되어 대규모 데이터셋에 적합
    + 여러 테이블의 데이터를 한 번에 결합 가능
+ **단점**
    + 잘못된 조인 조건 설정 시 부정확한 결과를 초래할 수 있음
    + 다수의 테이블 조인을 사용할 경우 가독성 저하

> #### 그럼 언제 무엇을 사용할까?
1. 여러 테이블에서 데이터를 결합해야 하거나 대규모 데이터셋? → **조인**
2. 특정 조건 필터링이나 계산이 필요한 상황에 쓰거나 논리를 단계적으로 나누고 싶다? → **서브쿼리**
