# 리눅스 운영 및 관리

## 1. 파일 시스템 관련 명령어

### 파일 시스템 기본 개념

> #### 정의
운영체제가 데이터를 저장하고 찾기 위해 구성하는 체계로, 디스크의 데이터와 파일을 연결하는 구조 <br>
☞ 파일 관리 (생성, 삭제, 수정), 접근 제어 및 권한 관리 등의 주요기능을 가지고 있다.

### 주요 명령어

> #### 파일시스템 관리
1. **mkfs (파일시스템 생성)**
```
mkfs -t <파일시스템종류> <장치명>

# 예시
mkfs -t ext4 /dev/sda1
```
ext3 파일 시스템을 생성할 때는 -j 옵션을 사용하는 것이 더 일반적이다. <br>
(mkfs -j ext4 /dev/sdb1 처럼은 사용할 수 없다.)

> [TIP] 파일시스템 종류
> > ext 계열: ext, ext2, ext3(저널링 기능 추가, 데이터 신뢰성 강화), ext4(현재 가장 널리 사용되는 파일시스템, 16TB 단일 파일 지원) <br>
> > 고성능 파일시스템: XFS, Btrfs, ZFS <br>
> > 특수 목적 파일시스템: iso9660, SWAP, EFI, NFS(네트워크 파일 공유 시스템)

2. **mount/umount (파일시스템 마운트/해제)**
```
mount -t [type] [device] [dir]

# 예시
sudo mount -t ext4 /dev/sda1 /mnt/data
```
  
3. **fdisk (파티션 관리)**
디스크 파티션을 확인/추가/삭제하는 명령어

> 주요 명령어:
> > **p**: 파티션 정보 출력,
> > **d**: 파티션 삭제,
> > **n**: 새 파티션 생성,
> > **w**: 변경사항 저장 후 종료,
> > **q**: 저장하지 않고 종료, <br>
> > **t**: 파티션의 속성을 변경(변경할 파티션 번호, 새로운 타입 코드를 입력)
```
# 파티션 관리 예시
sudo fdisk /dev/sdX
t
[파티션 번호]
[타입 코드]
w

# 실제 입력 예시
sudo fdisk /dev/sda
t
1
fd //83은 리눅스 파일 시스템, 8e는 Linux LVM, fd는 Linux RAID 자동 감지
w
```

> #### 디스크 관리
1. **df (디스크 공간 확인)** <br>
**파일시스템**의 전체 공간과 사용량 확인

> 주요 옵션:
> > -h: 사람이 읽기 쉬운 형태로 출력,
> > -T: 파일시스템 타입 표시

2. **du (디렉토리 용량 확인)** <br>
**특정 디렉토리**의 사용량 확인

> 주요 옵션:
> > -h: 사람이 읽기 쉬운 형태로 출력,
> > -s: 총 사용량만 표시

> #### 특수 권한 설정(sticky bit)
**Sticky bit**는 공용 디렉터리의 파일 보안을 위한 특수 권한 플래그 <br>
☞ 공유 디렉터리에서 "삭제 권한을 제한"하는 특별한 권한(쉽게 말해 "내 파일은 내가 지울 수 있게")

> 권한 설정 방법
> > **chmod 명령어** 이용 <br>
> > 8진수 방식(첫 자리 숫자에 1을 사용), 기호 방식(리눅스 o+t) <br>
> > 실행 권한이 있는 경우: 소문자 't'로 표시, 실행 권한이 없는 경우: 대문자 'T'로 표시
```
# 8진수 방식
chmod 1xxx 디렉터리명

# 기호 방식
chmod o+t 디렉터리명

# t와 T의 차이
# t → Sticky bit가 설정되어 있고, 실행(x) 권한도 있는 경우
drwxrwxrwt    # 777 권한 + sticky bit
# T → Sticky bit는 설정되어 있지만 실행(x) 권한이 없는 경우
drwxrwxrwT    # 776 권한 + sticky bit
```
